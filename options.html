<!DOCTYPE html>
<html>
<head>
    <title>Tab Accordion Settings</title>
    <link rel="stylesheet" href="options.css" media="screen,projection,tv,handheld,print,speech" >
</head>
<body>
<header><h1><img id="logo" src="icons/64_widget_icon_tab-accordion.png" width="64" height="64" alt="Extension Icon" /> Tab Accordion Settings</h1></header>
<section>
    <fieldset>
        <label>Snap new tabs</label>
        <p>These settings force newly created tabs to be pulled back into the group they were created from.</p>
        <dl>
            <dt>
                <label><input type="checkbox" name="snapForeTabs" id="snapForeTab"> Snap tabs created in the <em>foreground</em>.</label><br>
                <label><input type="checkbox" name="snapBackTabs" id="snapBackTab"> Snap tabs created in the <em>background</em>.</label><br>
                <label><input type="checkbox" name="createNewGroup" id="createNewGroup"> Create new tab group if tabs don't belong to any tab groups.</label>
            </dt>
            <dd>You may want to disable these options if you also use other tab-managing extensions.</dd>
        </dl>
    </fieldset>
</section>
<script>
    var snapForeTabField = document.getElementById('snapForeTab');
    var snapBackTabField = document.getElementById('snapBackTab');
    var createNewGroupField = document.getElementById('createNewGroup');

    if (widget.preferences.snapTab & 1) {
        snapForeTabField.checked = true;
    }

    if (widget.preferences.snapTab & 2) {
        snapBackTabField.checked = true;
    }

    if (widget.preferences.createGroup == 1) {
        createNewGroupField.checked = true;
    }

    snapForeTabField.addEventListener('change', function(){
        var mask = 1;

        if (this.checked) {
            widget.preferences.snapTab |= mask;
        } else {
            widget.preferences.snapTab &= ~mask;
        }
    }, false);

    snapBackTabField.addEventListener('change', function() {
        var mask = 2;

        if (this.checked) {
            widget.preferences.snapTab |= mask;
        } else {
            widget.preferences.snapTab &= ~mask;
        }
    })

    createNewGroupField.addEventListener('change', function() {
        if (this.checked) {
            widget.preferences.createGroup = 1;
        } else {
            widget.preferences.createGroup = 0;
        }
    });
</script>
</body>
</html>
